<!DOCTYPE html>
<html>
  <body style="width: 100vw; height: 100vh; padding: 0; margin: 0">
    <div id="container" style="display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; perspective: 1000px;">
    <div style="border: 1px solid blue; display: flex; justify-content: center; align-items: center; position: absolute; width: 100px; height: 100px; background-color: rgb(255 0 0 / 30%)">1</div>
    <div style="border: 1px solid blue; display: flex; justify-content: center; align-items: center; position: absolute; width: 100px; height: 100px; background-color: rgb(255 0 0 / 30%); transform: translateX(50px) translateZ(-50px) rotateY(90deg)">2</div>
    <div style="border: 1px solid blue; display: flex; justify-content: center; align-items: center; position: absolute; width: 100px; height: 100px; background-color: rgb(255 0 0 / 30%); transform: translateZ(-100px) rotateY(180deg)">3</div>
    <div style="border: 1px solid blue; display: flex; justify-content: center; align-items: center; position: absolute; width: 100px; height: 100px; background-color: rgb(255 0 0 / 30%); transform: translateX(-50px) translateZ(-50px) rotateY(-90deg)">4</div>
    <div style="border: 1px solid blue; display: flex; justify-content: center; align-items: center; position: absolute; width: 100px; height: 100px; background-color: rgb(255 0 0 / 30%); transform: translateZ(-50px) translateY(-50px) rotateX(90deg)">5</div>
    <div style="border: 1px solid blue; display: flex; justify-content: center; align-items: center; position: absolute; width: 100px; height: 100px; background-color: rgb(255 0 0 / 30%); transform: translateZ(-50px) translateY(50px) rotateX(-90deg)">6</div>
    <div id="seven" style="border: 1px solid blue; display: flex; justify-content: center; align-items: center; position: absolute; width: 100px; height: 100px; background-color: rgb(255 0 0 / 30%); transform: translateX(100px)">7</div>
    </div>
  </body>
  <script type="text/javascript">
    const container = document.getElementById('container')
    const seven = document.getElementById('seven')
    let mousedown = false
    let original_y = 0
    let angle = 0
    // z, y
    const transform_origin = [-50, seven.getBoundingClientRect().y]
    window.addEventListener('mousedown', (e) => {
      mousedown = true
      original_y = e.clientY
    })
    window.addEventListener('mouseup', (e) => {
      mousedown = false
    })
    window.addEventListener('mousemove', (e) => {
      if (mousedown) {
        angle = -0.01 * (e.clientY - original_y)
        if (angle < 0) angle = 2*Math.PI + angle
        let new_z = 50 * Math.cos(angle)
        let new_y = 50 * Math.sin(angle)
        seven.style.transform = `translateX(100px) translateZ(${new_z + transform_origin[0]}px) translateY(${new_y}px) rotateX(${-angle}rad)`
      }
    })
    let pox = 50
    let poy = 50
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') {
        pox -= 1
      } else if (e.key === 'ArrowRight') {
        pox += 1
      } else if (e.key === 'ArrowUp') {
        poy -= 1
      } else if (e.key === 'ArrowDown') {
        poy += 1
      }
      container.style.perspectiveOrigin = `${pox}% ${poy}%`
    })
  </script>
</html>
